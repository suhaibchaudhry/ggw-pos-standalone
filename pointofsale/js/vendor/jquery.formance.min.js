// Generated by CoffeeScript 1.6.2
(function(){var t,e,r,n,a,s,o,i,l,c,u,h,d,f,v,p,m,g,y,$,C,S,_,T,D,w,N,A,k,L,Z,M,F,K,Y,R,E,z,B,G,H,J,P,V,X,x,b,j,W,Q,I,U,O,q,te,ee,re,ne,ae,se,oe,ie,le,ce,ue=[].slice,he=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1};t=jQuery,t.formance={},t.formance.fn={},t.fn.formance=function(){var e,r;return r=arguments[0],e=2<=arguments.length?ue.call(arguments,1):[],t.formance.fn[r].apply(this,e)},ee=function(e){var r,n;return r=t(e.target),e.metaKey||e.ctrlKey?!0:32===e.which?!1:0===e.which?!0:e.which<33?!0:(n=String.fromCharCode(e.which),!!/[\d\s]/.test(n))},Q=function(e){var r,n;return r=t(e.target),e.metaKey||e.ctrlKey?!0:32===e.which?!1:0===e.which?!0:e.which<33?!0:(n=String.fromCharCode(e.which),!!/[\d\sA-Za-z]/.test(n))},J=function(t){var e;return null!=t.prop("selectionStart")&&t.prop("selectionStart")!==t.prop("selectionEnd")?!0:("undefined"!=typeof document&&null!==document&&null!=(e=document.selection)&&"function"==typeof e.createRange?e.createRange().text:void 0)?!0:!1},t.formance.fn.restrictNumeric=function(){return this.on("keypress",ee),this},t.formance.fn.restrictAlphaNumeric=function(){return this.on("keypress",Q),this},t.formance.fn.hasTextSelected=J,t=jQuery,J=t.formance.fn.hasTextSelected,a=/(\d{1,4})/g,n=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:a,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:a,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:a,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:a,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:a,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:a,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:a,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:a,length:[13,14,15,16],cvcLength:[3],luhn:!0}],e=function(t){var e,r,a;for(t=(t+"").replace(/\D/g,""),r=0,a=n.length;a>r;r++)if(e=n[r],e.pattern.test(t))return e},r=function(t){var e,r,a;for(r=0,a=n.length;a>r;r++)if(e=n[r],e.type===t)return e},I=function(e){var r,n,a;return r=t(e.currentTarget),n=String.fromCharCode(e.which),/^\d+$/.test(n)?(a=r.val()+n,a.length<=4):void 0},t.formance.fn.format_credit_card_cvc=function(){return this.formance("restrictNumeric"),this.on("keypress",I),this},t.formance.fn.validate_credit_card_cvc=function(){var e,n,a,s;return n=t(this).data("credit_card_type"),e=t(this).val(),e=t.trim(e),/^\d+$/.test(e)?n?(a=e.length,he.call(null!=(s=r(n))?s.cvcLength:void 0,a)>=0):e.length>=3&&e.length<=4:!1},t=jQuery,J=t.formance.fn.hasTextSelected,te=function(e){var r,n,a;return r=t(e.currentTarget),n=String.fromCharCode(e.which),/^\d+$/.test(n)&&!J(r)?(a=r.val()+n,a=a.replace(/\D/g,""),a.length>6?!1:void 0):void 0},$=function(e){var r,n,a;return n=String.fromCharCode(e.which),/^\d+$/.test(n)?(r=t(e.currentTarget),a=r.val()+n,/^\d$/.test(a)&&"0"!==a&&"1"!==a?(e.preventDefault(),r.val("0"+a+" / ")):/^\d\d$/.test(a)?(e.preventDefault(),r.val(""+a+" / ")):void 0):void 0},_=function(e){var r,n,a;return n=String.fromCharCode(e.which),/^\d+$/.test(n)?(r=t(e.currentTarget),a=r.val(),/^\d\d$/.test(a)?r.val(""+a+" / "):void 0):void 0},w=function(e){var r,n,a;return n=String.fromCharCode(e.which),"/"===n?(r=t(e.currentTarget),a=r.val(),/^\d$/.test(a)&&"0"!==a?r.val("0"+a+" / "):void 0):void 0},l=function(e){var r,n;if(!e.meta&&(r=t(e.currentTarget),n=r.val(),8===e.which&&(null==r.prop("selectionStart")||r.prop("selectionStart")===n.length)))return/\d(\s|\/)+$/.test(n)?(e.preventDefault(),r.val(n.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(n)?(e.preventDefault(),r.val(n.replace(/\s\/\s?\d?$/,""))):void 0},t.formance.fn.format_credit_card_expiry=function(){return this.formance("restrictNumeric"),this.on("keypress",te),this.on("keypress",$),this.on("keypress",w),this.on("keypress",_),this.on("keydown",l),this},V=function(t){var e,r,n,a,s;return n=t.replace(/\s/g,""),s=n.split("/",2),e=s[0],a=s[1],2===(null!=a?a.length:void 0)&&/^\d+$/.test(a)&&(r=(new Date).getFullYear(),r=r.toString().slice(0,2),a=r+a),e=parseInt(e,10),a=parseInt(a,10),{month:e,year:a}},t.formance.fn.val_credit_card_expiry=function(){var t;return t=V(this.val()),null==t.month||isNaN(t.month)?!1:null==t.year||isNaN(t.year)?!1:new Date(t.year,t.month-1)},t.formance.fn.validate_credit_card_expiry=function(){var e,r,n,a,s,o,i;return n=V(this.val()),a=n.month,o=n.year,"object"==typeof a&&"month"in a&&(i=a,a=i.month,o=i.year),a&&o?(a=t.trim(a),o=t.trim(o),/^\d+$/.test(a)&&/^\d+$/.test(o)&&parseInt(a,10)<=12?(2===o.length&&(s=(new Date).getFullYear(),s=s.toString().slice(0,2),o=s+o),r=new Date(o,a),e=new Date,r.setMonth(r.getMonth()-1),r.setMonth(r.getMonth()+1,1),r>e):!1):!1},t=jQuery,J=t.formance.fn.hasTextSelected,a=/(\d{1,4})/g,n=[{type:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,format:a,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"dinersclub",pattern:/^(36|38|30[0-5])/,format:a,length:[14],cvcLength:[3],luhn:!0},{type:"laser",pattern:/^(6706|6771|6709)/,format:a,length:[16,17,18,19],cvcLength:[3],luhn:!0},{type:"jcb",pattern:/^35/,format:a,length:[16],cvcLength:[3],luhn:!0},{type:"unionpay",pattern:/^62/,format:a,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"discover",pattern:/^(6011|65|64[4-9]|622)/,format:a,length:[16],cvcLength:[3],luhn:!0},{type:"mastercard",pattern:/^5[1-5]/,format:a,length:[16],cvcLength:[3],luhn:!0},{type:"amex",pattern:/^3[47]/,format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"visa",pattern:/^4/,format:a,length:[13,14,15,16],cvcLength:[3],luhn:!0}],e=function(t){var e,r,a;for(t=(t+"").replace(/\D/g,""),r=0,a=n.length;a>r;r++)if(e=n[r],e.pattern.test(t))return e},r=function(t){var e,r,a;for(r=0,a=n.length;a>r;r++)if(e=n[r],e.type===t)return e},P=function(t){var e,r,n,a,s,o;for(n=!0,a=0,r=(t+"").split("").reverse(),s=0,o=r.length;o>s;s++)e=r[s],e=parseInt(e,10),(n=!n)&&(e*=2),e>9&&(e-=9),a+=e;return a%10===0},U=function(r){var n,a,s,o;return n=t(r.currentTarget),s=String.fromCharCode(r.which),/^\d+$/.test(s)&&!J(n)?(o=(n.val()+s).replace(/\D/g,""),a=e(o),a?o.length<=a.length[a.length.length-1]:o.length<=16):void 0},j=function(e){return setTimeout(function(){var r,n;return r=t(e.currentTarget),n=r.val(),n=t.formance.formatCardNumber(n),r.val(n)})},m=function(r){var n,a,s,o,i,l,c;return s=String.fromCharCode(r.which),!/^\d+$/.test(s)||(n=t(r.currentTarget),c=n.val(),a=e(c+s),o=(c.replace(/\D/g,"")+s).length,l=16,a&&(l=a.length[a.length.length-1]),o>=l||null!=n.prop("selectionStart")&&n.prop("selectionStart")!==c.length)?void 0:(i=a&&"amex"===a.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,i.test(c)?(r.preventDefault(),n.val(c+" "+s)):i.test(c+s)?(r.preventDefault(),n.val(c+s+" ")):void 0)},s=function(e){var r,n;return r=t(e.currentTarget),n=r.val(),e.meta||8!==e.which||null!=r.prop("selectionStart")&&r.prop("selectionStart")!==n.length?void 0:/\d\s$/.test(n)?(e.preventDefault(),r.val(n.replace(/\d\s$/,""))):/\s\d?$/.test(n)?(e.preventDefault(),r.val(n.replace(/\s\d?$/,""))):void 0},ce=function(e){var r,a,s,o,i;return r=t(e.currentTarget),i=r.val(),o=t.formance.creditCardType(i)||"unknown",r.hasClass(o)?void 0:(a=function(){var t,e,r;for(r=[],t=0,e=n.length;e>t;t++)s=n[t],r.push(s.type);return r}(),r.removeClass("unknown"),r.removeClass(a.join(" ")),r.addClass(o),r.toggleClass("identified","unknown"!==o),r.trigger("payment.cardType",o))},t.formance.creditCardType=function(t){var r;return t?(null!=(r=e(t))?r.type:void 0)||null:null},t.formance.formatCreditCardNumber=function(t){var r,n,a,s;return(r=e(t))?(a=r.length[r.length.length-1],t=t.replace(/\D/g,""),t=t.slice(0,+a+1||9e9),r.format.global?null!=(s=t.match(r.format))?s.join(" "):void 0:(n=r.format.exec(t),null!=n&&n.shift(),null!=n?n.join(" "):void 0)):t},t.formance.fn.format_credit_card_number=function(){return this.formance("restrictNumeric"),this.on("keypress",U),this.on("keypress",m),this.on("keydown",s),this.on("keyup",ce),this.on("paste",j),this},t.formance.fn.validate_credit_card_number=function(){var r,n,a;return n=t(this).val(),n=(n+"").replace(/\s+|-/g,""),/^\d+$/.test(n)?(r=e(n),r?(a=n.length,he.call(r.length,a)>=0&&(r.luhn===!1||P(n))):!1):!1},t=jQuery,J=t.formance.fn.hasTextSelected,O=function(e){var r,n,a;return r=t(e.currentTarget),n=String.fromCharCode(e.which),/^\d+$/.test(n)&&!J(r)?(a=r.val()+n,a=a.replace(/\D/g,""),a.length>8?!1:void 0):void 0},g=function(e){var r,n,a,s;return n=String.fromCharCode(e.which),/^\d+$/.test(n)?(r=t(e.currentTarget),a=r.val(),s=a+n,/^\d$/.test(s)&&"0"!==n&&"1"!==n&&"2"!==n&&"3"!==n?(e.preventDefault(),r.val("0"+s+" / ")):/^\d{2}$/.test(s)?(e.preventDefault(),r.val(""+s+" / ")):/^\d{2}\s\/\s\d$/.test(s)&&"0"!==n&&"1"!==n?(e.preventDefault(),r.val(""+a+"0"+n+" / ")):/^\d{2}\s\/\s\d{2}$/.test(s)?(e.preventDefault(),r.val(""+s+" / ")):void 0):void 0},C=function(e){var r,n,a;return n=String.fromCharCode(e.which),/^\d+$/.test(n)?(r=t(e.currentTarget),a=r.val(),/^\d{2}$/.test(a)||/^\d{2}\s\/\s\d{2}$/.test(a)?r.val(""+a+" / "):void 0):void 0},T=function(e){var r,n,a,s,o,i,l,c,u;return l=String.fromCharCode(e.which),"/"===l?(r=t(e.currentTarget),c=r.val(),o=/^(\d)$/,i=/^(\d{2})\s\/\s(\d)$/,o.test(c)&&"0"!==c?r.val("0"+c+" / "):i.test(c)&&(u=c.match(i),n=u[0],a=u[1],s=u[2],"0"!==s)?r.val(""+a+" / 0"+s+" / "):void 0):void 0},o=function(e){var r,n;if(!e.meta&&(r=t(e.currentTarget),n=r.val(),8===e.which&&(null==r.prop("selectionStart")||r.prop("selectionStart")===n.length)))return/\d(\s|\/)+$/.test(n)?(e.preventDefault(),r.val(n.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(n)?(e.preventDefault(),r.val(n.replace(/\s\/\s?\d?$/,""))):void 0},t.formance.fn.format_dd_mm_yyyy=function(){return this.formance("restrictNumeric"),this.on("keypress",O),this.on("keypress",g),this.on("keypress",T),this.on("keypress",C),this.on("keydown",o),this},X=function(t){var e,r,n,a;return a=null!=t?t.replace(/\s/g,"").split("/",3):[0/0,0/0,0/0],e=a[0],r=a[1],n=a[2],(null==n||4!==n.length)&&(n=0/0),e=parseInt(e,10),r=parseInt(r,10),n=parseInt(n,10),{day:e,month:r,year:n}},t.formance.fn.val_dd_mm_yyyy=function(){var t;return t=X(this.val()),null==t.day||isNaN(t.day)?!1:null==t.month||isNaN(t.month)?!1:null==t.year||isNaN(t.year)?!1:new Date(t.year,t.month-1,t.day)},t.formance.fn.validate_dd_mm_yyyy=function(){var t,e;return e=X(this.val()),t=this.formance("val_dd_mm_yyyy"),null!=t&&t instanceof Date?t.getDate()!==e.day?!1:t.getMonth()+1!==e.month?!1:t.getFullYear()!==e.year?!1:!0:!1},t=jQuery,J=t.formance.fn.hasTextSelected,t.formance.fn.format_email=function(){return this},t.formance.fn.validate_email=function(){var e,r,n,a;return r={simple:/^\S+@\S+$/,complex:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\ ".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA -Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},e=t(this),n=e.val(),null==n?!1:(a=e.data("formance_algorithm"),null!=a&&a in r?r[a].test(n):r.simple.test(n))},t=jQuery,t.formance.fn.format_number=function(){var e;return e=t(this).data("formance_length"),null!=e&&t(this).attr("maxLength",e),this.formance("restrictNumeric"),this},t.formance.fn.validate_number=function(){var e,r,n;if(e=t(this),n=e.val(),r=e.data("formance_length"),null!=r&&"number"==typeof r&&n.length!==r)return!1;if(null!=r&&"string"==typeof r&&""!==r){if(isNaN(parseInt(r,10)))return!1;if(n.length!==parseInt(r,10))return!1}return/^\d+$/.test(n)},t=jQuery,J=t.formance.fn.hasTextSelected,re=function(e){var r,n,a;return r=t(e.currentTarget),n=String.fromCharCode(e.which),/^[a-zA-Z\d]+$/.test(n)&&!J(r)?(a=r.val()+n,a=a.replace(/[^a-zA-Z\d]/g,""),a.length>15?!1:void 0):void 0},L=function(e){var r,n,a,s;if(n=String.fromCharCode(e.which),/^[a-zA-Z\d]+$/.test(n))if(r=t(e.currentTarget),a=r.val(),s=a+n.toUpperCase(),""===a){if(e.preventDefault(),/^[A-Za-z]$/.test(s))return r.val(s)}else if(/^[A-Za-z]\d{0,3}$/.test(a)){if(e.preventDefault(),/^[A-Za-z]\d{4}$/.test(s)&&(s=""+s+" - "),/^[A-Za-z]\d{0,4}[\s|\-]*$/.test(s))return r.val(s)}else if(/^[A-Za-z]\d{4}[\s|\-]*\d{0,4}$/.test(a)&&(e.preventDefault(),/^[A-Za-z]\d{4}[\s|\-]*\d{5}$/.test(s)&&(s=""+s+" - "),/^[A-Za-z]\d{4}[\s|\-]*\d{0,5}[\s|\-]*$/.test(s)))return r.val(s)},c=function(e){var r,n;if(!e.meta&&(r=t(e.currentTarget),n=r.val(),8===e.which&&(null==r.prop("selectionStart")||r.prop("selectionStart")===n.length)))return/\d(\s|\-)+$/.test(n)?(e.preventDefault(),r.val(n.replace(/\d(\s|\-)+$/,""))):void 0},F=function(e){return setTimeout(function(){var r,n,a,s,o,i,l;return r=t(e.currentTarget),i=r.val(),l=i.match(/^([A-Za-z\d]{5})[\s|\-]*(\d{5})[\s|\-]*(\d{5})$/),a=l[0],n=l[1],o=l[2],s=l[3],r.val(""+n+" - "+o+" - "+s)})},t.formance.fn.format_ontario_drivers_license_number=function(){return this.formance("restrictAlphaNumeric"),this.on("keypress",re),this.on("keypress",L),this.on("keydown",c),this.on("paste",F),this},t.formance.fn.validate_ontario_drivers_license_number=function(){var e,r;return r=t(this).val(),null==r?!1:(r=r.replace(/[\s|\-]/g,""),/^[a-zA-Z\d]+$/.test()?(e=/^[A-Za-z]\d{4}[\s|\-]*\d{5}[\s|\-]*\d{5}$/,e.test(r)):!1)},t=jQuery,J=t.formance.fn.hasTextSelected,ne=function(e){var r,n,a;return r=t(e.currentTarget),n=String.fromCharCode(e.which),/^\d+$/.test(n)&&!J(r)?(a=r.val()+n,a=a.replace(/\D/g,""),a.length>15?!1:void 0):void 0},Z=function(e){var r,n,a,s;return n=String.fromCharCode(e.which),/^\d+$/.test(n)?(r=t(e.currentTarget),a=r.val(),s=r.val()+n,""===a?(e.preventDefault(),s=/^7$/.test(s)?"708158 ":"708158 "+s,r.val(s)):/^\d{5}$/.test(a)&&(e.preventDefault(),/^\d{6}$/.test(s)&&(s=""+s+" "),/^\d{6}\s*$/.test(s))?target.val(s):void 0):void 0},u=function(e){var r,n;if(!e.meta&&(r=t(e.currentTarget),n=r.val(),8===e.which&&(null==r.prop("selectionStart")||r.prop("selectionStart")===n.length)))return/708158\s+$/.test(n)?(e.preventDefault(),r.val(n.replace(/708158\s+$/,""))):void 0},K=function(e){return setTimeout(function(){var r,n,a,s,o,i;return r=t(e.currentTarget),o=r.val(),i=o.match(/^(\d{6})\s*(\d{9})$/),a=i[0],n=i[1],s=i[2],r.val(""+n+" "+s)})},t.formance.fn.format_ontario_outdoors_card_number=function(){return this.formance("restrictNumeric"),this.on("keypress",ne),this.on("keypress",Z),this.on("keydown",u),this.on("paste",K),this},t.formance.fn.validate_ontario_outdoors_card_number=function(){var e,r;return r=t(this).val(),null==r?!1:(r=r.replace(/\s/g,""),/^\d+$/.test(r)?(e=/^708158\s*\d{9}$/,e.test(r)):!1)},t=jQuery,J=t.formance.fn.hasTextSelected,ae=function(e){var r,n,a;return r=t(e.currentTarget),n=String.fromCharCode(e.which),/^[a-zA-Z\d]+$/.test(n)&&!J(r)?(a=r.val()+n,a=a.replace(/[^a-zA-Z\d]/g,""),a.length>12?!1:void 0):void 0},M=function(e){var r,n,a,s;if(n=String.fromCharCode(e.which),/^[a-zA-Z\d]+$/.test(n))if(r=t(e.currentTarget),a=r.val(),s=a+n.toUpperCase(),/^\d{0,3}$/.test(a)){if(e.preventDefault(),/^\d{4}$/.test(s)&&(s=""+s+" - "),/^\d{0,4}[\s|\-]*$/.test(s))return r.val(s)}else if(/^\d{4}[\s|\-]*\d{0,2}$/.test(a)){if(e.preventDefault(),/^\d{4}[\s|\-]*\d{3}$/.test(s)&&(s=""+s+" - "),/^\d{4}[\s|\-]*\d{0,3}[\s|\-]*$/.test(s))return r.val(s)}else if(/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{0,2}$/.test(a)){if(e.preventDefault(),/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{3}$/.test(s)&&(s=""+s+" - "),/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{0,3}[\s|\-]*$/.test(s))return r.val(s)}else if(/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{3}[\s|\-]*[A-Za-z]{0,1}$/.test(a)&&(e.preventDefault(),/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{3}[\s|\-]*[A-Za-z]{0,2}$/.test(s)))return r.val(s)},h=function(e){var r,n;if(!e.meta&&(r=t(e.currentTarget),n=r.val(),8===e.which&&(null==r.prop("selectionStart")||r.prop("selectionStart")===n.length)))return/\d(\s|\-)+$/.test(n)?(e.preventDefault(),r.val(n.replace(/\d(\s|\-)+$/,""))):void 0},Y=function(e){return setTimeout(function(){var r,n,a,s,o,i,l,c;return r=t(e.currentTarget),l=r.val(),c=l.match(/^(\d{4})[\s|\-]*(\d{3})[\s|\-]*(\d{3})[\s|\-]*([A-Za-z]{2})$/),a=c[0],n=c[1],o=c[2],i=c[3],s=c[4],r.val(""+n+" - "+o+" - "+i+" - "+s)})},t.formance.fn.format_ontario_photo_health_card_number=function(){return this.formance("restrictAlphaNumeric"),this.on("keypress",ae),this.on("keypress",M),this.on("keydown",h),this.on("paste",Y),this},t.formance.fn.validate_ontario_photo_health_card_number=function(){var e,r;return r=t(this).val(),null==r?!1:(r=r.replace(/[\s|\-]/g,""),/^[a-zA-Z\d]+$/.test()?(e=/^\d{4}[\s|\-]*\d{3}[\s|\-]*\d{3}[\s|\-]*[A-Za-z]{2}$/,e.test(r)):!1)},t=jQuery,J=t.formance.fn.hasTextSelected,W=function(t){var e,r,n,a,s,o;return a=t.replace(/\D/g,"").match(/^(\d{0,3})?(\d{0,3})?(\d{0,4})?$/),o=a,o?(a=o[0],e=o[1],r=o[2],n=o[3],s="",null!=e&&(s+="("+e),3===(null!=e?e.length:void 0)&&(s+=") "),null!=r&&(s+=""+r),3===(null!=r?r.length:void 0)&&(s+=" - "),null!=n&&(s+=""+n),s):t},se=function(e){var r,n,a;return r=t(e.currentTarget),n=String.fromCharCode(e.which),/^\d+$/.test(n)&&!J(r)?(a=r.val()+n,a=a.replace(/\D/g,""),a.length>10?!1:void 0):void 0},z=function(e){var r,n,a,s;return n=String.fromCharCode(e.which),/^\d+$/.test(n)?(r=t(e.currentTarget),s=r.val()+n,a=W(s),e.preventDefault(),r.val(a)):void 0},d=function(e){var r,n;if(!e.meta&&(r=t(e.currentTarget),n=r.val(),8===e.which&&(null==r.prop("selectionStart")||r.prop("selectionStart")===n.length)))return/\(\d$/.test(n)?(e.preventDefault(),r.val("")):/\d\)(\s)+$/.test(n)?(e.preventDefault(),r.val(n.replace(/\d\)(\s)*$/,""))):/\d(\s|\-)+$/.test(n)?(e.preventDefault(),r.val(n.replace(/\d(\s|\-)+$/,""))):void 0},R=function(e){return setTimeout(function(){var r,n,a;return r=t(e.currentTarget),a=r.val(),n=W(a),r.val(n)})},t.formance.fn.format_phone_number=function(){return this.formance("restrictNumeric"),this.on("keypress",se),this.on("keypress",z),this.on("keydown",d),this.on("paste",R),this},t.formance.fn.validate_phone_number=function(){var e;return e=t(this).val(),null==e?!1:(e=e.replace(/\(|\)|\s+|-/g,""),/^\d+$/.test(e)?10===e.replace(/\D/g,"").length:!1)},t=jQuery,J=t.formance.fn.hasTextSelected,oe=function(e){var r,n,a;return r=t(e.currentTarget),n=String.fromCharCode(e.which),/^[a-zA-Z\d]+$/.test(n)&&!J(r)?(a=r.val()+n,a=a.replace(/[^a-zA-Z\d]/g,""),a.length>6?!1:void 0):void 0},B=function(e){var r,n,a,s;if(n=String.fromCharCode(e.which),/^[a-zA-Z\d]+$/.test(n))if(r=t(e.currentTarget),a=r.val(),s=a+n.toUpperCase(),""===a){if(e.preventDefault(),/^[ABCEFGHJKLMNPRSTVXY]$/.test(s))return r.val(s)}else if(/^[ABCEFGHJKLMNPRSTVXY]$/.test(a)){if(e.preventDefault(),/^[ABCEFGHJKLMNPRSTVXY][0-9]$/.test(s))return r.val(s)}else if(/^[ABCEFGHJKLMNPRSTVXY][0-9]$/.test(a)){if(e.preventDefault(),/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]$/.test(s))return r.val(""+s+" ")}else if(/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s$/.test(a)){if(e.preventDefault(),/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9]$/.test(s))return r.val(s)}else if(/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9]$/.test(a)){if(e.preventDefault(),/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9][ABCEFGHJKLMNPRSTVWXYZ]$/.test(s))return r.val(s)}else if(/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9][ABCEFGHJKLMNPRSTVWXYZ]$/.test(a)&&(e.preventDefault(),/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9][ABCEFGHJKLMNPRSTVWXYZ][0-9]$/.test(s)))return r.val(s)},f=function(e){var r,n;if(!e.meta&&(r=t(e.currentTarget),n=r.val(),8===e.which&&(null==r.prop("selectionStart")||r.prop("selectionStart")===n.length)))return/[ABCEFGHJKLMNPRSTVWXYZ](\s)+$/.test(n)?(e.preventDefault(),r.val(n.replace(/[ABCEFGHJKLMNPRSTVWXYZ](\s)*$/,""))):void 0},E=function(e){return setTimeout(function(){var r,n,a,s,o,i;return r=t(e.currentTarget),o=r.val(),i=o.match(/^([ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ])\s?([0-9][ABCEFGHJKLMNPRSTVWXYZ][0-9])$/),a=i[0],n=i[1],s=i[2],r.val(""+n+" "+s)})},t.formance.fn.format_postal_code=function(){return this.formance("restrictAlphaNumeric"),this.on("keypress",oe),this.on("keypress",B),this.on("keydown",f),this.on("paste",E),this},t.formance.fn.validate_postal_code=function(){var e;return e=t(this).val(),null==e?!1:(e=e.replace(/\s+/g,""),/^[a-zA-Z\d]+$/.test(e)?(e=e.replace(/[^a-zA-Z\d]/g,""),/^[ABCEFGHJKLMNPRSTVXY][0-9][ABCEFGHJKLMNPRSTVWXYZ]\s?[0-9][ABCEFGHJKLMNPRSTVWXYZ][0-9]$/.test(e.toUpperCase())):!1)},t=jQuery,J=t.formance.fn.hasTextSelected,ie=function(e){var r,n,a;return r=t(e.currentTarget),n=String.fromCharCode(e.which),/^\d+$/.test(n)&&!J(r)?(a=r.val()+n,a=a.replace(/\D/g,""),a.length>4?!1:void 0):void 0},G=function(e){var r,n,a,s;return n=String.fromCharCode(e.which),/^\d+$/.test(n)?(r=t(e.currentTarget),a=r.val(),s=a+n,/^\d{2}$/.test(s)?(e.preventDefault(),r.val(""+s+" / ")):/^\d{2}\s\/\s\d{1}$/.test(s)&&"0"!==n&&"1"!==n?(e.preventDefault(),r.val(""+a+"0"+n)):void 0):void 0},A=function(e){var r,n,a;return n=String.fromCharCode(e.which),/^\d+$/.test(n)?(r=t(e.currentTarget),a=r.val(),/^\d{2}$/.test(a)?r.val(""+a+" / "):void 0):void 0},N=function(e){var r,n,a,s;return a=String.fromCharCode(e.which),"/"===a?(r=t(e.currentTarget),s=r.val(),n=/^(\d)$/,n.test(s)&&2===s.length||1===s.length?r.val("0"+s+" / "):void 0):void 0},v=function(e){var r,n;if(!e.meta&&(r=t(e.currentTarget),n=r.val(),8===e.which&&(null==r.prop("selectionStart")||r.prop("selectionStart")===n.length)))return/\d(\s|\/)+$/.test(n)?(e.preventDefault(),r.val(n.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(n)?(e.preventDefault(),r.val(n.replace(/\s\/\s?\d?$/,""))):void 0},t.formance.fn.format_time_yy_mm=function(){return this.formance("restrictNumeric"),this.on("keypress",ie),this.on("keypress",G),this.on("keypress",A),this.on("keypress",N),this.on("keydown",v),this},x=function(t){var e,r,n;return n=null!=t?t.replace(/\s/g,"").split("/",2):[0/0,0/0],r=n[0],e=n[1],e=parseInt(e,10),r=parseInt(r,10),{years:r,months:e}},t.formance.fn.val_time_yy_mm=function(){var t;return t=x(this.val()),null==t.years||isNaN(t.years)?!1:null==t.months||isNaN(t.months)?!1:t},t.formance.fn.validate_time_yy_mm=function(){var e,r,n;return r=x(this.val()),e=this.formance("val_time_yy_mm"),n=t(this).val(),e.months!==r.months?!1:e.years!==r.years?!1:/^(\d{1}[\d{1}]*)[\s\/]*(\d{1}[\d{1}]*)[\s\/]*$/.test(n)?!0:!1},t=jQuery,J=t.formance.fn.hasTextSelected,le=function(e){var r,n,a;return r=t(e.currentTarget),n=String.fromCharCode(e.which),/^\d+$/.test(n)&&!J(r)?(a=r.val()+n,a=a.replace(/\D/g,""),a.length>6?!1:void 0):void 0},k=function(e){var r,n,a;return n=String.fromCharCode(e.which),/^\d+$/.test(n)?(r=t(e.currentTarget),a=r.val(),/^\d{2}$/.test(a)||/^\d{2}\s\-\s\d{2}$/.test(a)?r.val(""+a+" - "):void 0):void 0},p=function(e){var r,n;if(!e.meta&&(r=t(e.currentTarget),n=r.val(),8===e.which&&(null==r.prop("selectionStart")||r.prop("selectionStart")===n.length)))return/\d(\s|\-)+$/.test(n)?(e.preventDefault(),r.val(n.replace(/\d(\s|\-)+$/,""))):/\s\-\s?\d?$/.test(n)?(e.preventDefault(),r.val(n.replace(/\s\-\s?\d?$/,""))):void 0},H=function(e){var r,n,a,s;return n=String.fromCharCode(e.which),/^\d+$/.test(n)?(r=t(e.currentTarget),a=r.val(),s=a+n,/^\d{2}$/.test(s)?(e.preventDefault(),r.val(""+s+" - ")):/^\d{2}\s\-\s\d{2}$/.test(s)?(e.preventDefault(),r.val(""+s+" - ")):void 0):void 0},t.formance.fn.format_uk_sort_code=function(){return this.formance("restrictNumeric"),this.on("keypress",le),this.on("keypress",H),this.on("keypress",k),this.on("keydown",p),this},t.formance.fn.validate_uk_sort_code=function(){var e;return e=t(this).val(),/^(\d{2})[\s\-]*(\d{2})[\s\-]*(\d{2})[\s]*$/.test(e)?!0:!1},t=jQuery,J=t.formance.fn.hasTextSelected,q=function(e){var r,n,a;return r=t(e.currentTarget),n=String.fromCharCode(e.which),/^\d+$/.test(n)&&!J(r)?(a=r.val()+n,a=a.replace(/\D/g,""),a.length>8?!1:void 0):void 0},y=function(e){var r,n,a,s;return n=String.fromCharCode(e.which),/^\d+$/.test(n)?(r=t(e.currentTarget),a=r.val(),s=a+n,/^\d{4}$/.test(s)?(e.preventDefault(),r.val(""+s+" / ")):/^\d{4}\s\/\s\d$/.test(s)&&"0"!==n&&"1"!==n?(e.preventDefault(),r.val(""+a+"0"+n+" / ")):/^\d{4}\s\/\s\d{2}$/.test(s)?(e.preventDefault(),r.val(""+s+" / ")):/^\d{4}\s\/\s\d{2}\s\/\s\d$/.test(s)&&"0"!==n&&"1"!==n&&"2"!==n&&"3"!==n?(e.preventDefault(),r.val(""+a+"0"+n)):void 0):void 0},S=function(e){var r,n,a;return n=String.fromCharCode(e.which),/^\d+$/.test(n)?(r=t(e.currentTarget),a=r.val(),/^\d{4}$/.test(a)||/^\d{4}\s\/\s\d{2}$/.test(a)?r.val(""+a+" / "):void 0):void 0},D=function(e){var r,n,a,s,o,i,l,c;return o=String.fromCharCode(e.which),"/"===o?(r=t(e.currentTarget),i=r.val(),s=/^(\d{4})\s\/\s(\d)$/,s.test(i)&&(c=i.match(s),n=c[0],l=c[1],a=c[2],"0"!==a)?r.val(""+l+" / 0"+a+" / "):void 0):void 0},i=function(e){var r,n;if(!e.meta&&(r=t(e.currentTarget),n=r.val(),8===e.which&&(null==r.prop("selectionStart")||r.prop("selectionStart")===n.length)))return/\d(\s|\/)+$/.test(n)?(e.preventDefault(),r.val(n.replace(/\d(\s|\/)*$/,""))):/\s\/\s?\d?$/.test(n)?(e.preventDefault(),r.val(n.replace(/\s\/\s?\d?$/,""))):void 0},t.formance.fn.format_yyyy_mm_dd=function(){return this.formance("restrictNumeric"),this.on("keypress",q),this.on("keypress",y),this.on("keypress",D),this.on("keypress",S),this.on("keydown",i),this},b=function(t){var e,r,n,a;return a=null!=t?t.replace(/\s/g,"").split("/",3):[0/0,0/0,0/0],n=a[0],r=a[1],e=a[2],(null==n||4!==n.length)&&(n=0/0),e=parseInt(e,10),r=parseInt(r,10),n=parseInt(n,10),{day:e,month:r,year:n}},t.formance.fn.val_yyyy_mm_dd=function(){var t;return t=b(this.val()),null==t.day||isNaN(t.day)?!1:null==t.month||isNaN(t.month)?!1:null==t.year||isNaN(t.year)?!1:new Date(t.year,t.month-1,t.day)},t.formance.fn.validate_yyyy_mm_dd=function(){var t,e;return e=b(this.val()),t=this.formance("val_yyyy_mm_dd"),null!=t&&t instanceof Date?t.getDate()!==e.day?!1:t.getMonth()+1!==e.month?!1:t.getFullYear()!==e.year?!1:!0:!1}}).call(this);